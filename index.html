<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBI TEAM ROBLOX Database</title>
    <style>
        body {
            background-color: #0b0f19;
            color: white;
            font-family: "Arial", sans-serif;
            text-align: center;
            padding-top: 30px;
        }

        #header {
            font-size: 24px;
            font-weight: bold;
            background-color: #141922;
            padding: 15px;
            border-bottom: 3px solid #7289da;
        }

        /* Online Users Section */
        #online-users-container {
            margin: 20px auto;
            width: 60%;
            background-color: #141922;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(114, 137, 218, 0.3);
            border-left: 6px solid #43b581;
        }

        #online-users-header {
            font-size: 20px;
            font-weight: bold;
            color: #43b581;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .online-indicator {
            width: 12px;
            height: 12px;
            background-color: #43b581;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                box-shadow: 0 0 0 0 rgba(67, 181, 129, 0.7);
            }
            50% {
                opacity: 0.8;
                box-shadow: 0 0 0 10px rgba(67, 181, 129, 0);
            }
        }

        #online-users-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
            min-height: 50px;
        }

        .online-user-card {
            background-color: #1e232a;
            border: 2px solid #43b581;
            border-radius: 5px;
            padding: 10px;
            text-align: left;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .online-user-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(67, 181, 129, 0.3);
            border-color: #5bc894;
        }

        .online-user-name {
            font-weight: bold;
            color: #ffffff;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .online-user-threat {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 3px;
            display: inline-block;
        }

        #online-count {
            font-size: 16px;
            color: #b9bbbe;
            margin-top: 10px;
        }

        .loading {
            color: #7289da;
            font-style: italic;
            padding: 10px;
        }

        .no-online {
            color: #99aab5;
            font-style: italic;
            padding: 20px;
        }

        #refresh-btn {
            background-color: #43b581;
            margin-top: 10px;
        }

        #refresh-btn:hover {
            background-color: #5bc894;
        }

        #search-container {
            margin: 20px auto;
            width: 60%;
            background-color: #141922;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.2);
        }

        input {
            width: 70%;
            padding: 10px;
            font-size: 16px;
            border: 2px solid white;
            background-color: #1e232a;
            color: white;
            border-radius: 5px;
            outline: none;
        }

        button {
            padding: 10px 15px;
            font-size: 16px;
            background-color: #d9534f;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin: 5px;
        }

        #results {
            margin-top: 20px;
        }

        .embed-box {
            background-color: #141922;
            border-left: 6px solid #7289da;
            border-radius: 8px;
            padding: 15px;
            width: 60%;
            text-align: left;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
            margin: 10px auto;
        }

        .embed-title {
            font-size: 20px;
            font-weight: bold;
            color: #ffffff;
        }

        .embed-description {
            font-size: 16px;
            color: #b9bbbe;
        }

        .highlight {
            font-weight: bold;
            color: #ffffff;
        }

        .threat-level {
            font-weight: bold;
            padding: 5px;
            border-radius: 5px;
            display: inline-block;
            margin-top: 5px;
        }

        .low { background-color: green; color: white; }
        .medium { background-color: orange; color: black; }
        .high { background-color: red; color: white; }
        .critical { background-color: darkred; color: white; }

        .online-badge {
            background-color: #43b581;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            margin-left: 10px;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @media (max-width: 768px) {
            #online-users-container, #search-container, .embed-box {
                width: 90%;
            }

            #online-users-list {
                grid-template-columns: 1fr;
            }

            input {
                width: 60%;
            }
        }
    </style>
</head>
<body>

    <div id="header">FBI TEAM ROBLOX Criminal Database</div>

    <!-- Online Users Section -->
    <div id="online-users-container">
        <div id="online-users-header">
            <div class="online-indicator"></div>
            <span>üü¢ SUSPECTS CURRENTLY ONLINE</span>
        </div>
        <div id="online-users-list">
            <div class="loading">Checking online status...</div>
        </div>
        <div id="online-count"></div>
        <button id="refresh-btn" onclick="checkOnlineUsers()">üîÑ Refresh Online Status</button>
    </div>

    <div id="search-container">
        <input type="text" id="search-bar" placeholder="Search for a suspect...">
        <button onclick="search()">üîç Search</button>
    </div>

    <div id="results"></div>

    <script>
        // Database of suspects
        const users = [
            { username: "bropro30090", reason: "2x Firing on Officer, 1x Bank Robbery, 1x Robbery", details: "N/A", threat: "High" },
            { username: "ExploitBan", reason: "Officer murders, Agent murders and is an mafia member.", details: "N/A", threat: "Critical" },
            { username: "Akori4e", reason: "Shooting multiple officers and FBI members", details: "The girl doesn't stop shooting, very dangerous.", threat: "Critical" },
            { username: "LUKE_R2D2", reason: "Murdering an Agent", details: "Suspect said it's from TPC.", threat: "High" },
            { username: "UhOkayz", reason: "Officer murder after investigation", details: "N/A", threat: "High" },
            { username: "001vvs", reason: "Shooting FBI Agent and Damaging FBI Vehicle", details: "N/A", threat: "Medium" },
            { username: "Ikhebeenhond10", reason: "Started firing on officer and killed me", details: "N/A", threat: "High" },
            { username: "darkvader_47", reason: "Murder on federal agent, x3 Evasion, x1 ATM Robbery", details: "Drives a black Bullhorn Determinator SFP, black jack Widebody 2022 with white rims, plate: DEMON.", threat: "Critical" },
            { username: "Flo010709", reason: "x10 officer murder and teaming", details: "N/A", threat: "Critical" },
            { username: "Hamim234", reason: "x5 officer murder and teaming", details: "N/A", threat: "High" },
            { username: "Oaudyi", reason: "Possible contract killer", details: "Ordered to kill us by 2 masked people.", threat: "Critical" },
            { username: "Visttula", reason: "Firing on agent x1", details: "Possible another contract killer.", threat: "Medium" },
            { username: "ShaneBarf", reason: "Stalking and threats", details: "Looks like he is targeting me.", threat: "Low" }, 
            { username: "LCCDeveloper", reason: "5 star wanted, committed federal crimes", details: "There is a chance the person is using exploit", threat: "High" }, 
            { username: "hamim234", reason: "x5 officer murder and teaming", details: "N/A", threat: "High" }, 
            { username: "De3pr", reason: "Agent murder 2x, Officer murder 7x", details: "Also teaming with cops.", threat: "High" }, 
            { username: "ddhied", reason: "N/A", details: "Suspect is teaming with a TAC member and has murdered and fired on Agents 3x", threat: "High" }, 
            { username: "Aadrit456", reason: "Murdered an FBI agent, faking a guard of president, attempted murder on president, being in crime organization TPC", details: "At LCSO 2024/10/15 GMT+8 11:49", threat: "High" }, 
            { username: "Earleeue", reason: "Murdered 2 FBI at field office, faking report to the FBI, might be part of a crime organization", details: "Suspect was using phone before killing 2 FBI agents", threat: "High" }, 
            { username: "ninjayush934", reason: "1x FBI Agent Kidnapping, 3x Firing on Agents, 1x Agent Murder", details: "N/A", threat: "High" }, 
            { username: "alessandrotto02", reason: "2x Firing on Agents, 1x Armed Robbery on Shop, 1x Agent Murder", details: "N/A", threat: "High" },
            { username: "LifeHackeriscool", reason: "Murder", details: "Multiple Officer Murders, Civilian Murders", threat: "Medium" }, 
            { username: "SUPTUENES", reason: "Organized Crime", details: "Organized Bank Robbery", threat: "High" }, 
            { username: "BILLYBUTCHER_EXE", reason: "Mass murder.", details: "He murdered 9 people, (X3) Civilians, (X6) Officers", threat: "High" }, 
            { username: "sa1nteus", reason: "Mass murder, Evasion, Bank robbery, ETC (most of his wanted reasons were not on MFD)", details: "N/A", threat: "High" }, 
            { username: "matula2000", reason: "Multiple Counts of Murder", details: "Wanted for Multiple Counts of Murder; FBI Agent & Multiple Officers. Last known Location: Highrock Park Main Area", threat: "High" }, 
            { username: "cxnnor_bsbl217", reason: "Mass Murder of FBI agents, cops and civilians", details: "N/A", threat: "Critical" }, 
            { username: "20Colian10", reason: "Stealing classified file", details: "He African American. he was documented. but he on wanted for Stealing Classified file from us", threat: "Medium"}, 
            { username: "LucyTheSleepy", reason: "Officer Murder x2, Firing on Officer x2, Bank Robber.", details: "Suspected to be a part of SRT.", threat: "High" }, 
            { username: "Valdek33", reason: "Firing on Agent, Officer Murder.", details: "N/A", threat: "Low" }, 
            { username: "Trungdeptryy06", reason: "Gun Trafficking", details: "According this chat, it may probably triad", threat: "Low" }, 
            { username: "tinsell99", reason: "Shooting Undercover Agent while do Survelliance", details: "He was listed on ICE Wanted list for few crime he did", threat: "Low" }, 
            { username: "Doggie3337", reason: "Raid Sheriff Office", details: "There a two suspect including her which involved on Raid with sniper. i scare them off but only got her", threat: "Low" }, 
            { username: "WhoaThatsDak", reason: "Raid Sheriff Office, Killing Undercover Agent", details: "Its another one. But, he got me when i scare them", threat: "Low" }, 
            { username: "Nichthias", reason: "Firing on helicopter and officer murder", details: "Is armed and dangereus, played in T3 S2. Get him arrested.", threat: "Low" }, 
            { username: "IVAN091006", reason: "Attempting Assasinate", details: "He probably try assasinate me for bounty money. after he got arrested, he still trying shooting me as cops.", threat: "Low" }, 
            { username: "4EVfaf", reason: "murdering multiple units of the LCSO and RCPD, stated he will do it again once out of prison, fleeing officers and shooting down a police helicopter.", details: "has a fast, purple, supercar also has a sidekick who he seems to help him with comitting these major crimes.", threat: "Medium" }, 
            { username: "Dinopod1234", reason: "Multiple murdering units of the LCSO and RCPD, also has comitted bank robbery", details: "Is with 4EVfaf, usually are in the same car. they both spawn in springfield", threat: "Medium" },
            { username: "AwesomEngineer01", reason: "Multiple Officers Murder, Including FBI", details: "Moves with at least 3 people, Blue Audi", threat: "Medium" }, 
            { username: "gew117123", reason: "Bank Robbery+Multiple Other Robberies and killed a officer", details: "Tall, white male, drives a completely blacked out buggati Plates: KITTY", threat: "Low" },
            { username: "TheMiner127", reason: "Involved in killing a Federal Agent, attack on a Judge.", details: "Also shooting on a helicopter, 6x officer murders, and is in a mafia with another suspect.", threat: "Low" },
            { username: "Eric2active", reason: "Evading, shooting LEOs and Federal Agents, possibly involved in an attack on a Judge and firing on a helicopter", details: "Suspect is also in a mafia with the suspect above.", threat: "Low" },
            { username: "xmaxy830", reason: "Attacking a Judge at Courthouse.", details: "Driving a black van, and threatening to go back to the courthouse to kill the Judge.", threat: "Medium" },
            { username: "rxeul", reason: "Bank Robbery and murder of a federal agent", details: "Killed Federal Agent near Bank. Armed with a machine gun, no known houses/occupations.", threat: "Low" },
            { username: "xzcqnv", reason: "Multiple officer murder, and more", details: "Teaming with officer ma3qiii, abusing the game mechanics. (Threat could be low to none as not in roleplay)", threat: "Low" },
            { username: "ma3qiii", reason: "Corrupt Officer", details: "She is teaming with suspect xzcqnv", threat: "Low" },
            { username: "IIIIIIIIIIIIIIII", reason: "Mass murder, EXECUTING LAW ENFORCEMENT OFFICERS, MOST ON FEDERAL PROPERTY", details: "Killed 3x FBI Agents.", threat: "Medium" },
            { username: "OfficerJamesWithTase", reason: "Mass Murder.", details: "Shot a heli.", threat: "Low" },
            { username: "TupolevTu4", reason: "Mass Murder", details: "Shot a heli, possible in mafia with OfficerJamesWithTase.", threat: "Low" },
            { username: "whippypiee", reason: "Major Attack, Mass Murder", details: "Shot on Helicopter", threat: "Low" },
            { username: "JitteryRet", reason: "Major Attack, Mass Murder", details: "Shot on Helicopter", threat: "Medium" },
            { username: "NinjaWolf249", reason: "Mass Murder,Major attack", details: "Shot on helicopter", threat: "Low" },
            { username: "Vindhaevn", reason: "Mass Murder, Major Attack", details: "Shot on helicopter.", threat: "Low" },
            { username: "EliteERLCRoleplayer", reason: "Mass Murder, major attack.", details: "Shot on helicopter", threat: "Low" },
            { username: "S1rAvia", reason: "Mass murder, Major attack.", details: "Shot on heli.", threat: "Low" },
            { username: "H4nn4h_IsBetter", reason: "Bank Robbery", details: "Robbed bank 1x", threat: "Low" }
        ];

        // Global variables
        let onlineUsersGlobal = [];
        let userIdCache = {};

        // Get User ID using Roproxy (bypasses CORS)
        async function getUserId(username) {
            if (userIdCache[username]) {
                return userIdCache[username];
            }

            try {
                const response = await fetch(`https://users.roproxy.com/v1/usernames/${username}`, {

                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ usernames: [username], excludeBannedUsers: false })
                });

                const data = await response.json();
                
                if (data.data && data.data.length > 0) {
                    userIdCache[username] = data.data[0].id;
                    return data.data[0].id;
                }
            } catch (error) {
                console.error(`Error for ${username}:`, error);
            }
            return null;
        }

        // Check online status for batch of user IDs
        async function checkBatchOnlineStatus(userIds) {
            try {
                const response = await fetch('https://presence.roproxy.com/v1/presence/users', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ userIds: userIds })
                });

                const data = await response.json();
                return data.userPresences || [];
            } catch (error) {
                console.error('Presence check error:', error);
                return [];
            }
        }

        // Main online checking function
        async function checkOnlineUsers() {
            const listDiv = document.getElementById('online-users-list');
            const countDiv = document.getElementById('online-count');
            
            listDiv.innerHTML = '<div class="loading">Checking online status...</div>';
            countDiv.innerHTML = '';
            
            let onlineUsers = [];
            const batchSize = 50;
            
            for (let i = 0; i < users.length; i += batchSize) {
                const batch = users.slice(i, i + batchSize);
                
                // Get IDs
                const ids = await Promise.all(batch.map(u => getUserId(u.username)));
                const validData = batch.map((user, idx) => ({ user, id: ids[idx] }))
                                       .filter(d => d.id !== null);

                if (validData.length > 0) {
                    const presences = await checkBatchOnlineStatus(validData.map(d => d.id));
                    
                    presences.forEach(p => {
                        if (p.userPresenceType === 2) { // In game
                            const found = validData.find(d => d.id === p.userId);
                            if (found) onlineUsers.push(found.user);
                        }
                    });
                }

                if (i + batchSize < users.length) {
                    await new Promise(r => setTimeout(r, 1000));
                }
            }

            onlineUsersGlobal = onlineUsers;

            if (onlineUsers.length > 0) {
                listDiv.innerHTML = '';
                onlineUsers.forEach(user => {
                    const card = document.createElement('div');
                    card.className = 'online-user-card';
                    card.onclick = () => searchSpecificUser(user.username);
                    card.innerHTML = `
                        <div class="online-user-name">üéÆ ${user.username}</div>
                        <div class="online-user-threat ${getThreatClass(user.threat)}">${user.threat} Threat</div>
                    `;
                    listDiv.appendChild(card);
                });
                countDiv.innerHTML = `<strong>${onlineUsers.length}</strong> suspect(s) currently online`;
            } else {
                listDiv.innerHTML = '<div class="no-online">‚úÖ No suspects currently online</div>';
            }
        }

        function searchSpecificUser(username) {
            document.getElementById('search-bar').value = username;
            search();
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        function search() {
            const query = document.getElementById("search-bar").value.toLowerCase();
            const resultsDiv = document.getElementById("results");

            resultsDiv.innerHTML = "";
            
            if (!query.trim()) return;
            
            const matches = users.filter(u => u.username.toLowerCase().includes(query));

            if (matches.length > 0) {
                matches.forEach(user => {
                    const isOnline = onlineUsersGlobal.some(o => 
                        o.username.toLowerCase() === user.username.toLowerCase()
                    );
                    const badge = isOnline ? '<span class="online-badge">üü¢ ONLINE NOW</span>' : '';
                    
                    resultsDiv.innerHTML += `
                        <div class="embed-box">
                            <div class="embed-title">üîç ${user.username}${badge}</div>
                            <div class="embed-description">
                                <span class="highlight">Username:</span> ${user.username}<br>
                                <span class="highlight">Reason:</span> ${user.reason}<br>
                                <span class="highlight">Details:</span> ${user.details}<br>
                                <span class="highlight">Threat:</span> <span class="threat-level ${getThreatClass(user.threat)}">${user.threat}</span>
                            </div>
                        </div>
                    `;
                });
            } else {
                resultsDiv.innerHTML = `
                    <div class="embed-box">
                        <div class="embed-title">‚ùå No Results</div>
                        <div class="embed-description">No results for "<b>${query}</b>"</div>
                    </div>
                `;
            }
        }

        function getThreatClass(level) {
            const map = { "Low": "low", "Medium": "medium", "High": "high", "Critical": "critical" };
            return map[level] || "";
        }

        // Initialize
        window.addEventListener('load', () => {
            checkOnlineUsers();
            setInterval(checkOnlineUsers, 180000); // Every 3 minutes
        });

        document.getElementById('search-bar').addEventListener('keypress', e => {
            if (e.key === 'Enter') search();
        });
    </script>

</body>
</html>
